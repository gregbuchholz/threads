   Compiling threads v0.1.0 (/home/greg/rust-examples/threads)
error: linking with `emcc` failed: exit status: 1
  |
  = note: "emcc" "-s" "EXPORTED_FUNCTIONS=[\"_main\",\"_rust_eh_personality\"]" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.0.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.1.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.10.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.11.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.12.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.13.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.14.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.15.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.2.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.3.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.4.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.5.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.6.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.7.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.8.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.9.rcgu.o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.1vd5q954vuukfxxp.rcgu.o" "-L" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps" "-L" "/home/greg/rust-examples/threads/target/release/deps" "-L" "/home/greg/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/wasm32-unknown-emscripten/lib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libpanic_unwind-9a1e9c5fb8726d3f.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd_detect-4aa250a5f4f2ae95.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/librustc_demangle-5a18b483c615d41b.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libhashbrown-1d25a2e936f19e2e.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/librustc_std_workspace_alloc-4cb6d37c10bc0b55.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libunwind-6d97fac5911cb87c.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libcfg_if-2c5b6a82a0bca380.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/liblibc-9ed779b9a57d7835.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/liballoc-6f110fc81c74cf19.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/librustc_std_workspace_core-172187b2782b0e5c.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libcore-7a69737378859c80.rlib" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libcompiler_builtins-09cf377743c3f009.rlib" "-l" "c" "-s" "DISABLE_EXCEPTION_CATCHING=0" "-L" "/home/greg/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/wasm32-unknown-emscripten/lib" "-L" "/home/greg/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/wasm32-unknown-emscripten/lib/self-contained" "-o" "/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.js" "-O3" "--memory-init-file" "0" "-g0" "-s" "DEFAULT_LIBRARY_FUNCS_TO_INCLUDE=[]" "src/gxx_personality_v0_stub.o" "-pthread" "-s" "PROXY_TO_PTHREAD" "-s" "ERROR_ON_UNDEFINED_SYMBOLS=1" "-s" "ASSERTIONS=1" "-s" "ABORTING_MALLOC=0" "-Wl,--fatal-warnings"
  = note: wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.13.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::io::stdio::OUTPUT_CAPTURE::__getit::__KEY::h776cf75763f0fad1`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.13.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::io::stdio::OUTPUT_CAPTURE::__getit::__KEY::h776cf75763f0fad1`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.13.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::io::stdio::OUTPUT_CAPTURE::__getit::__KEY::h776cf75763f0fad1`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.13.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::io::stdio::OUTPUT_CAPTURE::__getit::__KEY::h776cf75763f0fad1`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.13.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::io::stdio::OUTPUT_CAPTURE::__getit::__KEY::h776cf75763f0fad1`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.13.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::io::stdio::OUTPUT_CAPTURE::__getit::__KEY::h776cf75763f0fad1`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.13.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::io::stdio::OUTPUT_CAPTURE::__getit::__KEY::h776cf75763f0fad1`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.13.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::io::stdio::OUTPUT_CAPTURE::__getit::__KEY::h776cf75763f0fad1`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::STATE::haca3e53312905f45 (.0.0.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::VAL::he3952260436a3dd6 (.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::VAL::he3952260436a3dd6 (.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::STATE::haca3e53312905f45 (.0.0.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::VAL::he3952260436a3dd6 (.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::VAL::he3952260436a3dd6 (.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::VAL::he3952260436a3dd6 (.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::VAL::he3952260436a3dd6 (.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::VAL::he3952260436a3dd6 (.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::VAL::he3952260436a3dd6 (.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::STATE::haca3e53312905f45 (.0.0.llvm.16251061034901608940)`
          wasm-ld: error: /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib(std-c3ef1d33e4a2152f.std.ac802b8c-cgu.2.rcgu.o): relocation R_WASM_MEMORY_ADDR_TLS_SLEB cannot be used against non-TLS symbol `std::sys_common::thread_info::THREAD_INFO::__getit::STATE::haca3e53312905f45 (.0.0.llvm.16251061034901608940)`
          wasm-ld: error: too many errors emitted, stopping now (use -error-limit=0 to see all errors)
          emcc: error: '/home/greg/emsdk/upstream/bin/wasm-ld -o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.wasm /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.0.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.1.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.10.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.11.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.12.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.13.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.14.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.15.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.2.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.3.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.4.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.5.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.6.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.7.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.8.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.threads.1d23ab3f-cgu.9.rcgu.o /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/threads.1vd5q954vuukfxxp.rcgu.o -L/home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps -L/home/greg/rust-examples/threads/target/release/deps -L/home/greg/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/wasm32-unknown-emscripten/lib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd-c3ef1d33e4a2152f.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libpanic_unwind-9a1e9c5fb8726d3f.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libstd_detect-4aa250a5f4f2ae95.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/librustc_demangle-5a18b483c615d41b.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libhashbrown-1d25a2e936f19e2e.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/librustc_std_workspace_alloc-4cb6d37c10bc0b55.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libunwind-6d97fac5911cb87c.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libcfg_if-2c5b6a82a0bca380.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/liblibc-9ed779b9a57d7835.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/liballoc-6f110fc81c74cf19.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/librustc_std_workspace_core-172187b2782b0e5c.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libcore-7a69737378859c80.rlib /home/greg/rust-examples/threads/target/wasm32-unknown-emscripten/release/deps/libcompiler_builtins-09cf377743c3f009.rlib -lc-mt -L/home/greg/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/wasm32-unknown-emscripten/lib -L/home/greg/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/wasm32-unknown-emscripten/lib/self-contained src/gxx_personality_v0_stub.o --fatal-warnings -L/home/greg/emsdk/upstream/emscripten/cache/sysroot/lib/wasm32-emscripten /home/greg/emsdk/upstream/emscripten/cache/sysroot/lib/wasm32-emscripten/crtbegin.o -lGL-mt -lal -lhtml5 -lstubs-debug -lc-mt -lcompiler_rt-mt -lc++-mt -lc++abi-mt -ldlmalloc-mt -lc_rt-mt -lsockets-mt -mllvm -combiner-global-alias-analysis=false -mllvm -enable-emscripten-cxx-exceptions -mllvm -enable-emscripten-sjlj -mllvm -disable-lsr --import-undefined --import-memory --shared-memory --strip-debug --export-if-defined=main --export-if-defined=rust_eh_personality --export-if-defined=emscripten_stack_get_end --export-if-defined=emscripten_stack_get_free --export-if-defined=emscripten_stack_init --export-if-defined=stackSave --export-if-defined=stackRestore --export-if-defined=stackAlloc --export-if-defined=__wasm_call_ctors --export-if-defined=fflush --export-if-defined=__errno_location --export-if-defined=__emscripten_init_main_thread --export-if-defined=_emscripten_call_on_thread --export-if-defined=_emscripten_main_thread_futex --export-if-defined=_emscripten_thread_init --export-if-defined=_emscripten_thread_exit --export-if-defined=_emscripten_thread_free_data --export-if-defined=emscripten_current_thread_process_queued_calls --export-if-defined=_emscripten_allow_main_runtime_queued_calls --export-if-defined=emscripten_futex_wake --export-if-defined=emscripten_get_global_libc --export-if-defined=emscripten_main_browser_thread_id --export-if-defined=emscripten_main_thread_process_queued_calls --export-if-defined=emscripten_run_in_main_runtime_thread_js --export-if-defined=emscripten_stack_set_limits --export-if-defined=emscripten_sync_run_in_main_thread_2 --export-if-defined=emscripten_sync_run_in_main_thread_4 --export-if-defined=emscripten_tls_init --export-if-defined=pthread_self --export-if-defined=pthread_testcancel --export-if-defined=exit --export-if-defined=memalign --export-if-defined=emscripten_proxy_main --export-if-defined=malloc --export-if-defined=free --export-if-defined=__cxa_is_pointer_type --export-if-defined=__cxa_can_catch --export-if-defined=setThrew --export-if-defined=ntohs --export-if-defined=htons --export-if-defined=htonl --export-if-defined=__start_em_asm --export-if-defined=__stop_em_asm --export-table -z stack-size=5242880 --initial-memory=16777216 --no-entry --max-memory=16777216 --global-base=1024' failed (returned 1)
          

error: could not compile `threads` due to previous error
